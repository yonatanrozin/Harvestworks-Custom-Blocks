{"version":3,"file":"event-list/view.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,MAAMA,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,mCAAmC,CAAC;AAE7E,SAASC,SAASA,CAACC,KAAK,EAAE;EAEtB,MAAM;IAACC,UAAU;IAAEC,GAAG;IAAEC,cAAc;IAAEC;EAAY,CAAC,GAAGJ,KAAK;EAC7D,MAAM;IAACK,IAAI;IAAEC,IAAI;IAAEC,QAAQ;IAAEC,UAAU;IAAEC;EAAO,CAAC,GAAGP,GAAG;EAEvD,OAAO;AACX;AACA,cAAcC,cAAc,GAAG,8BAA8BA,cAAc,SAAS,GAAG,EAAE;AACzF;AACA;AACA,+CAA+CE,IAAI,CAACK,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACjE;AACA,+CAA+CF,UAAU,EAAEG,IAAI;AAC/D;AACA,mDAAmDJ,QAAQ;AAC3D;AACA;AACA,gDAAgDN,UAAU;AAC1D,oDAAoDQ,OAAO;AAC3D;AACA,+CAA+CL,YAAY;AAC3D;AACA;AACA,KAAK;AACL;AAEA,eAAeQ,SAASA,CAAA,EAAG;EAEvB,IAAIC,SAAS,GAAG,IAAIC,GAAG,CAACC,MAAM,CAACR,QAAQ,CAACS,IAAI,CAAC,CAACC,YAAY,CAACC,GAAG,CAAC,MAAM,CAAC;EACtE,MAAMC,QAAQ,GAAG,wBAAwBN,SAAS,GAAG,SAASA,SAAS,EAAE,GAAG,EAAE,EAAE;EAEhF,MAAMO,MAAM,GAAG,MAAM,CAAC,MAAMC,KAAK,CAACF,QAAQ,CAAC,EAAEG,IAAI,CAAC,CAAC;EACnD1B,SAAS,CAAC2B,SAAS,GAAGH,MAAM,CAACI,GAAG,CAACC,CAAC,IAAI1B,SAAS,CAAC0B,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC;AAChE;AAEA7B,QAAQ,CAAC8B,gBAAgB,CAAC,kBAAkB,EAAEf,SAAS,CAAC;AACxDG,MAAM,CAACY,gBAAgB,CAAC,UAAU,EAAEf,SAAS,CAAC;;AAE9C,8B","sources":["webpack://harvestworks/./src/event-list/view.js"],"sourcesContent":["/**\r\n * Use this file for JavaScript code that you want to run in the front-end\r\n * on posts/pages that contain this block.\r\n *\r\n * When this file is defined as the value of the `viewScript` property\r\n * in `block.json` it will be enqueued on the front end of the site.\r\n *\r\n * Example:\r\n *\r\n * ```js\r\n * {\r\n *   \"viewScript\": \"file:./view.js\"\r\n * }\r\n * ```\r\n *\r\n * If you're not making any changes to this file because your project doesn't need any\r\n * JavaScript running in the front-end, then you should delete this file and remove\r\n * the `viewScript` property from `block.json`.\r\n *\r\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\r\n */\r\n\r\n/* eslint-disable no-console */\r\n\r\nconst block_div = document.querySelector(\".wp-block-harvestworks-event-list\");\r\n\r\nfunction eventCard(event) {\r\n\r\n    const {post_title, acf, featured_image, post_excerpt} = event;\r\n    const {date, time, location, event_type, artists} = acf;\r\n\r\n    return `\r\n        <div class=\"event_card\">\r\n            ${featured_image ? `<img class=\"event_img\" src=${featured_image}></img>` : \"\"}\r\n            <div class=\"event_info\">\r\n                <div class=\"event_details\" >\r\n                    <span class=\"event_date\">${date.split(\",\")[0]}</span>\r\n                    <span>•</span>\r\n                    <span class=\"event_type\">${event_type?.name}</span>\r\n                    <span>•</span>\r\n                    <span class=\"event_location\">${location}</span>\r\n                </div>\r\n                <h2 class=\"event_name\">\r\n                    <span class=\"event_title\">${post_title}</span>\r\n                    <span class=\"event_artist\">by ${artists}</span>\r\n                </h2>\r\n                <p class=\"event_description\">${post_excerpt}</p>\r\n            </div>\r\n        </div>\r\n    `;\r\n}\r\n            \r\nasync function getEvents() {\r\n\r\n    let dateparam = new URL(window.location.href).searchParams.get(\"date\");\r\n    const queryURL = `/wp-json/wp/v2/events${dateparam ? `?date=${dateparam}` : \"\"}`;\r\n    \r\n    const events = await (await fetch(queryURL)).json();\r\n    block_div.innerHTML = events.map(e => eventCard(e)).join(\"\");\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", getEvents);\r\nwindow.addEventListener(\"popstate\", getEvents);\r\n\r\n/* eslint-enable no-console */\r\n"],"names":["block_div","document","querySelector","eventCard","event","post_title","acf","featured_image","post_excerpt","date","time","location","event_type","artists","split","name","getEvents","dateparam","URL","window","href","searchParams","get","queryURL","events","fetch","json","innerHTML","map","e","join","addEventListener"],"sourceRoot":""}