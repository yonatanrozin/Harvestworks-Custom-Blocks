(()=>{function t(t){return t.toISOString().split("T")[0].split("-").join("")}function n(t){const n=t.substring(0,4),e=t.substring(4,6),o=t.substring(6,8);return new Date(n,e-1,o)}function e(t){const n=t.substring(0,4),e=t.substring(4,6)-1;return new Date(n,e+1,0).getDate()}const o=document.querySelectorAll(".calendar_day");function s(a){const c=n(a);document.querySelector(".calendar_day").style.gridColumnStart=function(t){const n=t.substring(0,4),e=t.substring(4,6)-1;return new Date(n,e,1).getDay()+1}(a),document.querySelector("#calendar_date h3").innerHTML=c.toLocaleString("default",{month:"short"})+" "+c.toLocaleString("default",{year:"numeric"});for(const t of o){const n=Number(t.id),o=t.id.padStart(2,"0"),s=a.substring(0,6)+o;n>e(a)?t.style.display="none":(t.style.display="flex",t.classList.remove("queried"),t.classList.remove("has_event"),t.onclick=()=>r(s))}fetch("/wp-json/wp/v2/month?date="+a).then((t=>t.json())).then((t=>function(t,n){if(!Array.isArray(n))return console.log("Invalid events data:",n);if(0===n.length)return console.log("No events for the month.");console.log("Rendering events for month:",t,n);for(const e of o){const o=e.id.padStart(2,"0"),s=t.substring(0,6)+o;n.filter((t=>{const n=t.acf.date;let e=t.acf.end_date;if(!n)return!1;e&&0!==e.length||(e=n);try{return parseInt(s)>=parseInt(n)&&parseInt(s)<=parseInt(e)}catch(t){return!1}})).length>0?e.classList.add("has_event"):e.classList.remove("has_event")}}(a,t))),document.getElementById("nextMonthButton").onclick=()=>function(e){console.log("Navigating to next month from:",e);const o=n(e),a=t(new Date(o.getFullYear(),o.getMonth()+1,1));s(a),r(a)}(a),document.getElementById("prevMonthButton").onclick=()=>function(e){console.log("Navigating to previous month from:",e);const o=n(e),a=t(new Date(o.getFullYear(),o.getMonth()-1,1));s(a),r(a)}(a)}function r(t){console.log("Setting calendar to day:",t),function(t){console.log("Saving date to URL & storage:",t);const n=new URL(window.location.href);n.searchParams.set("date",t),history.pushState({},"",n),window.sessionStorage.setItem("hw_calendar_date",t),window.dispatchEvent(new PopStateEvent("popstate"))}(t);for(const n of o){const e=n.id.padStart(2,"0");t.substring(0,6)+e===t?n.classList.add("queried"):n.classList.remove("queried")}}!function(){const n=function(){const n=new URL(window.location.href).searchParams.get("date");if(!n||8!=n.length)return t(new Date);try{parseInt(n)}catch(n){return t(new Date)}return n}();console.log("Initializing calendar on date:",n),s(n),r(n)}()})();